services:
  # PostgreSQL Database
  - type: pserv
    name: horizon-cafe-postgres
    plan: free
    ipAllowList: []
    
  # Node.js Backend
  - type: web
    name: horizon-cafe-api
    env: node
    plan: free
    
    buildCommand: cd backend && npm install
    startCommand: cd backend && node server.js
    
    envVars:
      - key: NODE_ENV
        scope: run
        value: production
        
      - key: DATABASE_URL
        scope: run
        fromService:
          type: pserv
          name: horizon-cafe-postgres
          property: connectionString
        
      - key: JWT_SECRET
        scope: run
        value: your-secret-key-change-this
        
      - key: FRONTEND_URL
        scope: run
        value: https://horizon-cafe-api.onrender.com
        
      - key: EMAIL_USER
        scope: run
        value: your-gmail@gmail.com
        
      - key: EMAIL_PASSWORD
        scope: run
        value: your-app-password
        
    autoDeploy: true
