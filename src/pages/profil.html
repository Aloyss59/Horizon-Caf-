<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Horizon Café - Mon Profil</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="/css/responsive.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="../js/common.js" defer></script>
<script src="../js/profil.js" defer></script>

<style>
/* RESET & BASE */
*{margin:0;padding:0;box-sizing:border-box;font-family:'Montserrat','Roboto',sans-serif;}
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Roboto:wght@400;500;700&display=swap');

body{background:#1a1a1a;color:#e0e0e0;line-height:1.5;}
h1,h2,h3,h4,h5{font-weight:700;color:#ffffff;}
p{font-size:0.9rem;color:#b0b0b0;}
a{text-decoration:none;color:inherit;}

/* NAVBAR */
.navbar{width:100%;background:#0a0a0a;padding:0.8rem 2rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1000;box-shadow:0 0 30px rgba(0,210,255,0.3), 0 4px 12px rgba(0,0,0,0.8);border-bottom:2px solid #00d2ff;}
.navbar .logo h2{color:#ffffff;font-size:1.5rem;font-weight:800;font-family:'Montserrat',sans-serif;text-shadow:0 0 10px #00d2ff, 0 0 20px #00d2ff, 0 0 30px #0099cc;letter-spacing:2px;}
.navbar .nav-links{list-style:none;display:flex;gap:1rem;align-items:center;margin-left:2rem;}
.navbar .nav-link{display:flex;align-items:center;gap:0.25rem;padding:0.5rem 0.75rem;border-radius:4px;color:#e0e0e0;}
.navbar .nav-link:hover,.navbar .nav-link.active{background:rgba(100,100,100,0.2);color:#e0e0e0;}
.navbar .user-section{display:flex;align-items:center;gap:1rem;margin-left:auto;color:#e0e0e0;}
.user-name-link{cursor:pointer;padding:0.5rem 1rem;border-radius:4px;transition:all 0.3s;font-weight:600;display:flex;align-items:center;gap:0.5rem;}
.user-name-link:hover{background:rgba(0,210,255,0.2);color:#00d2ff;}
.btn-logout{background:#4a4a4a;color:#e0e0e0;border:none;padding:0.4rem 0.8rem;border-radius:4px;cursor:pointer;display:flex;align-items:center;gap:0.25rem;transition:all 0.3s;font-weight:bold;}
.btn-logout:hover{background:#6a6a6a;transform:translateY(-2px);}
.btn-theme-toggle{background:transparent;border:2px solid #00d2ff;color:#00d2ff;padding:0.6rem 0.9rem;border-radius:6px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:transform 0.3s ease, box-shadow 0.3s ease;font-size:1.1rem;margin-right:1rem;position:relative;overflow:hidden;box-shadow:0 0 10px rgba(0,210,255,0.3);}
.btn-theme-toggle::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(0,210,255,0.3),transparent);transition:left 0.5s;}
.btn-theme-toggle:hover::before{left:100%;}
.btn-theme-toggle:hover{background:rgba(0,210,255,0.15);transform:scale(1.15);box-shadow:0 0 20px rgba(0,210,255,0.6);text-shadow:0 0 10px rgba(0,210,255,0.8);}

/* MAIN CONTAINER */
.container{max-width:1200px;margin:0 auto;padding:2rem;}
h1.page-title{text-align:center;font-size:2.5rem;color:#00d2ff;margin-bottom:2rem;font-weight:800;text-shadow:0 0 10px #00d2ff;font-family:'Montserrat',sans-serif;}

/* PROFIL HEADER */
.profil-header{background:linear-gradient(135deg,#0f0f0f,#1a1a1a);padding:2rem;border-radius:15px;border:2px solid #00d2ff;margin-bottom:2rem;box-shadow:0 0 30px rgba(0,210,255,0.2);}
.profil-info{display:flex;align-items:center;gap:2rem;margin-bottom:1.5rem;}
.profil-avatar{width:100px;height:100px;border-radius:50%;background:linear-gradient(135deg,#00d2ff,#00ff88);display:flex;align-items:center;justify-content:center;font-size:3rem;box-shadow:0 0 20px rgba(0,210,255,0.4);}
.profil-details h2{font-size:1.8rem;margin-bottom:0.5rem;color:#00d2ff;}
.profil-details p{color:#b0b0b0;margin:0.25rem 0;}
.profil-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-top:1.5rem;}
.stat-card{background:#0a0a0a;padding:1.5rem;border-radius:10px;border-left:4px solid #00d2ff;text-align:center;}
.stat-card .stat-value{font-size:2rem;font-weight:800;color:#00ff88;margin-bottom:0.5rem;}
.stat-card .stat-label{font-size:0.9rem;color:#b0b0b0;text-transform:uppercase;letter-spacing:1px;}

/* CREDITS SECTION */
.credits-section{background:linear-gradient(135deg,#0f0f0f,#1a1a1a);padding:2rem;border-radius:15px;border:2px solid #00d2ff;margin-bottom:2rem;}
.section-title{font-size:1.5rem;color:#00d2ff;margin-bottom:1.5rem;display:flex;align-items:center;gap:0.75rem;}
.section-title i{font-size:1.8rem;}
.credits-display{background:#0a0a0a;padding:2rem;border-radius:10px;text-align:center;margin-bottom:1.5rem;border:2px dashed #00ff88;}
.credits-amount{font-size:3rem;font-weight:900;color:#00ff88;text-shadow:0 0 20px rgba(0,255,136,0.5);margin-bottom:0.5rem;}
.credits-label{color:#b0b0b0;font-size:1rem;text-transform:uppercase;letter-spacing:2px;}
.recharge-form{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem;}
.recharge-input{padding:1rem;background:#0a0a0a;border:1px solid #2a2a2a;border-radius:8px;color:#e0e0e0;font-size:1rem;}
.recharge-input::placeholder{color:#666;}
.recharge-presets{display:flex;gap:0.75rem;flex-wrap:wrap;margin-bottom:1rem;}
.preset-btn{padding:0.75rem 1.5rem;background:#2a2a2a;color:#e0e0e0;border:2px solid transparent;border-radius:6px;cursor:pointer;font-weight:600;transition:all 0.3s;}
.preset-btn:hover{border-color:#00d2ff;color:#00d2ff;}
.btn-recharge{padding:1rem 2rem;background:#00d2ff;color:#000;border:none;border-radius:8px;cursor:pointer;font-weight:700;font-size:1rem;transition:all 0.3s;}
.btn-recharge:hover{background:#00ffff;transform:translateY(-2px);box-shadow:0 0 20px rgba(0,210,255,0.5);}

/* REWARDS SECTION */
.rewards-section{background:linear-gradient(135deg,#0f0f0f,#1a1a1a);padding:2rem;border-radius:15px;border:2px solid #00ff88;margin-bottom:2rem;}
.rewards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem;}
.reward-card{background:#0a0a0a;padding:1.5rem;border-radius:10px;border:2px solid #2a2a2a;cursor:pointer;transition:all 0.3s;text-align:center;}
.reward-card:hover{border-color:#00ff88;box-shadow:0 0 20px rgba(0,255,136,0.3);transform:translateY(-5px);}
.reward-icon{font-size:2.5rem;margin-bottom:1rem;}
.reward-card h3{color:#00ff88;margin-bottom:0.5rem;font-size:1.1rem;}
.reward-card p{color:#b0b0b0;font-size:0.85rem;margin-bottom:1rem;}
.reward-points{color:#00d2ff;font-weight:700;font-size:1.3rem;margin-bottom:0.75rem;}
.btn-claim{padding:0.5rem 1rem;background:#00ff88;color:#000;border:none;border-radius:6px;cursor:pointer;font-weight:600;transition:all 0.3s;font-size:0.85rem;}
.btn-claim:hover{background:#00ffff;transform:scale(1.05);}
.btn-claim.claimed{background:#666;color:#999;cursor:not-allowed;}

/* ANALYTICS SECTION */
.analytics-section{background:linear-gradient(135deg,#0f0f0f,#1a1a1a);padding:2rem;border-radius:15px;border:2px solid #ff9b7a;margin-bottom:2rem;}
.analytics-grid{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:1.5rem;}
.chart-container{background:#0a0a0a;padding:1.5rem;border-radius:10px;position:relative;height:300px;}
.chart-container canvas{max-height:100%;}
.expense-table{margin-top:1.5rem;}
.expense-table table{width:100%;border-collapse:collapse;}
.expense-table th{background:#0a0a0a;padding:1rem;text-align:left;border-bottom:2px solid #2a2a2a;color:#00d2ff;font-weight:600;}
.expense-table td{padding:0.75rem 1rem;border-bottom:1px solid #2a2a2a;color:#e0e0e0;}
.expense-table tr:hover{background:#0f0f0f;}
.expense-item{color:#00d2ff;font-weight:600;}
.expense-price{color:#ff6b4a;font-weight:700;}
.expense-date{color:#b0b0b0;font-size:0.85rem;}

/* SCROLLBAR */
::-webkit-scrollbar{width:8px;}
::-webkit-scrollbar-track{background:#0f0f0f;}
::-webkit-scrollbar-thumb{background:#00d2ff;border-radius:10px;}
::-webkit-scrollbar-thumb:hover{background:#00ffff;}

/* MODE CLAIR */
body.light-mode{background:#fafaf8;color:#2c2c2c;}
body.light-mode h1,body.light-mode h2,body.light-mode h3,body.light-mode h4,body.light-mode h5{color:#1a1a1a;}
body.light-mode p{color:#555;}
body.light-mode .navbar{background:linear-gradient(135deg,#ffffff 0%,#f9f6f3 100%);border-bottom-color:#ff6b4a;}
body.light-mode .navbar .logo h2{color:#ff6b4a;text-shadow:0 0 15px rgba(255,107,74,0.3);}
body.light-mode .user-name-link:hover{background:rgba(255,107,74,0.1);color:#ff6b4a;}
body.light-mode .btn-logout{background:#ff9b7a;color:#fff;}
body.light-mode .btn-logout:hover{background:#ff6b4a;}
body.light-mode .btn-theme-toggle{border-color:#ff9b7a;color:#ff6b4a;background:rgba(255,107,74,0.05);}
body.light-mode .btn-theme-toggle:hover{background:rgba(255,107,74,0.1);}
body.light-mode .page-title{color:#ff6b4a;text-shadow:0 0 20px rgba(255,107,74,0.3);}
body.light-mode .container{background:#fafaf8;}
body.light-mode .profil-header,body.light-mode .credits-section,body.light-mode .rewards-section,body.light-mode .analytics-section{background:linear-gradient(135deg,#fff9f5,#fffaf7);border-color:#ff6b4a;}
body.light-mode .section-title{color:#ff6b4a;}
body.light-mode .stat-card{background:#ffffff;border-left-color:#ff6b4a;box-shadow:0 0 15px rgba(255,107,74,0.1);}
body.light-mode .stat-card .stat-value{color:#ff6b4a;}
body.light-mode .credits-display{background:#ffffff;border-color:#ff6b4a;}
body.light-mode .credits-amount{color:#ff6b4a;text-shadow:0 0 20px rgba(255,107,74,0.2);}
body.light-mode .recharge-input{background:#ffffff;border-color:#ffd4a0;color:#2c2c2c;}
body.light-mode .preset-btn{background:#f0f0f0;color:#2c2c2c;border-color:#ffd4a0;}
body.light-mode .preset-btn:hover{border-color:#ff6b4a;color:#ff6b4a;}
body.light-mode .btn-recharge{background:#ff6b4a;color:#fff;}
body.light-mode .btn-recharge:hover{background:#ff4a20;}
body.light-mode .reward-card{background:#ffffff;border-color:#ffd4a0;}
body.light-mode .reward-card:hover{border-color:#ff6b4a;box-shadow:0 0 20px rgba(255,107,74,0.2);}
body.light-mode .reward-card h3{color:#ff6b4a;}
body.light-mode .reward-points{color:#ff6b4a;}
body.light-mode .btn-claim{background:#ff6b4a;color:#fff;}
body.light-mode .btn-claim:hover{background:#ff4a20;}
body.light-mode .chart-container{background:#ffffff;}
body.light-mode .expense-table th{background:#f5f5f5;border-bottom-color:#ffd4a0;color:#ff6b4a;}
body.light-mode .expense-table td{border-bottom-color:#ffd4a0;}
body.light-mode .expense-table tr:hover{background:#fafaf8;}
body.light-mode .expense-item{color:#ff6b4a;}

/* FOOTER */
footer{background:#0a0a0a;color:#888;padding:2rem;text-align:center;border-top:2px solid #00d2ff;box-shadow:0 0 20px rgba(0,210,255,0.2);margin-top:3rem;font-size:0.9rem;}
footer p{color:#888;margin:0;}
footer i{color:#00d2ff;}
body.light-mode footer{background:#ffffff;border-top-color:#ff6b4a;color:#555;}
body.light-mode footer i{color:#ff6b4a;}
body.light-mode ::-webkit-scrollbar-thumb{background:#ff6b4a;}
body.light-mode ::-webkit-scrollbar-thumb:hover{background:#ff4a20;}

/* RESPONSIVE */
@media(max-width:768px){
.profil-info{flex-direction:column;text-align:center;}
.analytics-grid{grid-template-columns:1fr;}
.recharge-form{grid-template-columns:1fr;}
}
</style>
</head>
<body>
<nav class="navbar">
    <div class="logo"><h2>Horizon Café</h2></div>
    <button class="btn-menu-toggle" id="btnMenuToggle" onclick="toggleMobileMenu()"></button>
    <ul class="nav-links" id="navLinks">
        <li><a href="./home.html" class="nav-link"><i class="fas fa-home"></i> Accueil</a></li>
        <li><a href="./menu.html" class="nav-link"><i class="fas fa-utensils"></i> Menu</a></li>
        <li><a href="./schedule.html" class="nav-link"><i class="fas fa-calendar"></i> Emploi du Temps</a></li>
        <li><a href="./chat.html" class="nav-link"><i class="fas fa-comments"></i> Chat</a></li>
    </ul>
    <button class="btn-theme-toggle" id="themeToggle" title="Basculer le mode">
        <i class="fas fa-moon"></i>
    </button>
    <div class="user-section">
        <span id="userGreeting">Jean Dupont</span>
        <button class="btn-logout" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Déconnexion</button>
    </div>
</nav>

<div class="container">
    <h1 class="page-title"><i class="fas fa-user-circle"></i> Mon Profil</h1>

    <!-- PROFIL HEADER -->
    <div class="profil-header">
        <div class="profil-info">
            <div class="profil-avatar"><i class="fas fa-user"></i></div>
            <div class="profil-details">
                <h2 id="profilName">Chargement...</h2>
                <p><i class="fas fa-envelope"></i> <span id="profilEmail">-</span></p>
                <p><i class="fas fa-user"></i> <span id="profilUsername">-</span></p>
            </div>
        </div>
        <div class="profil-stats">
            <div class="stat-card">
                <div class="stat-value"><span id="totalSpent">0.00</span></div>
                <div class="stat-label">Dépenses Totales</div>
            </div>
            <div class="stat-card">
                <div class="stat-value"><span id="totalOrders">0</span></div>
                <div class="stat-label">Commandes</div>
            </div>
        </div>
    </div>

    <!-- CREDITS SECTION -->
    <div class="credits-section">
        <h2 class="section-title">Mes Crédits</h2>
        <div class="credits-display">
            <div class="credits-amount"><span id="creditBalance">0.00</span></div>
            <div class="credits-label">Crédits Disponibles</div>
        </div>
        
        <div class="recharge-form">
            <input type="number" id="rechargeAmount" class="recharge-input" placeholder="Montant en € (1€ = 10 crédits)" step="0.01" min="1">
            <button class="btn-recharge" onclick="rechargeCredits()"><i class="fas fa-credit-card"></i> Payer par Carte Bancaire</button>
        </div>
    </div>

    <!-- ANALYTICS SECTION -->
    <div class="analytics-section">
        <h2 class="section-title">Mes Statistiques</h2>
        <div class="analytics-grid">
            <div class="chart-container">
                <canvas id="spendingChart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="categoryChart"></canvas>
            </div>
        </div>
        <div class="expense-table">
            <h3 style="margin-bottom:1rem;color:#00d2ff;">Historique Récent</h3>
            <table>
                <thead>
                    <tr>
                        <th>Produit</th>
                        <th>Prix</th>
                        <th>Date</th>
                        <th>Mode</th>
                    </tr>
                </thead>
                <tbody id="expenseHistory">
                    <tr>
                        <td colspan="4" style="text-align:center;color:#666;">Aucun historique</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="../js/common.js"></script>

<!-- FOOTER -->
<footer>
    <p>&copy; 2026 Horizon Café - Tous droits réservés | Conçu avec <i class="fas fa-heart"></i> par l'équipe</p>
</footer>

</body>
</html>
